<table width="100%">
  <tr>
    <% for column in Job.columns %>
      <th>
        <span style="font-size: x-large;"><%= link_to column.human_name, { :page => @job_pages.current,
          :order_by => "#{column.name} ASC"} %></span>
      </th>
    <% end %>
  </tr>
  <% for job in @jobs %>
    <tr style="background: <%= cycle("#ccc","") %>;">
      <% for column in Job.columns %>
              <%if (column.name == "id") %>
          <td> <%= link_to(job.id, { :action => 'status', :id => job.id }) %></td>
        <% else %>
              <% if (column.name == "QueryString") %>
            <td> <%=h wrap_string(job.QueryString, 30) %></td>
          <% else%>
            <td><%=h job.send(column.name) %></td>
          <% end %>
        <% end %>
  <% end %>
    </tr>
  <% end %>
  <tr>
    <td colspan="<%= Job.columns.length %>">
      <hr />
      <center>
        <%= link_to '[previous]', { :page => @job_pages.current.previous, :order_by => @jobs_by } \
                  if @job_pages.current.previous %>
        <%= pagination_links(@job_pages, :params => { :order_by => @jobs_by }) %>
        <%= link_to '[next]', { :page => @job_pages.current.next, :order_by => @jobs_by } \
                  if @job_pages.current.next %>
      </center>
    </td>
  </tr>
</table>
<%= link_to 'New job', :action => 'newjob' %>